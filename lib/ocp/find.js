
let okdAPI = require('okd-api')
let _ = require('lodash')

const cluster = "https://console.rhos.agriculture.gov.ie:443"

const pod_token = `eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJzc28tdWF0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImRlZmF1bHQtdG9rZW4tNno5cHMiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVmYXVsdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjgxMDgyOTY3LWQzMGEtMTFlOS04MWY5LTAwNTA1NmJhYzNjZiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpzc28tdWF0OmRlZmF1bHQifQ.Gpv3Q9r38IZ797ngz82Z_m9Ge2gB5tSxlC3WU4lQH4-5tAgHuUA7uBX1eHmUfFdV6G5S8qPKWnL0HpgCy8jdl6SJkacA9kuLjhwKUXotHX3AJLQxxxzyapenxkM_s13I2zGSYzDbnobsJM0hpLA21XzeZ1_tCz4xNg7k1iqNHM6ihPfIAiBFp1uMfq2qjw97P_lZ4ZEZRWFMwBYYJVxG4EZ1U9bLmags58u79er1xuJ8S0f1HFvJzQrzFBuzPtnYGTHrs4tD_JEZCu_V7ggQvX1lTb9J1Bedp8zVF6xrL90syHmaZ8SmWWo90O4FVk21IFR-UZYegppV5zS0Fuo7IQ`

function find(PROJECT, token) {
	const svcs = okdAPI.okd(cluster, pod_token).namespace(PROJECT).svc.all()

	svcs.then(svc_list => console.log('list: ', svc_list) ).catch(error => console.log('error: '. error))

}

module.exports = find
